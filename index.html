<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MotoApp Caucasia</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body { margin: 0; display: flex; flex-direction: column; height: 100vh; font-family: 'Segoe UI', sans-serif; }
        
        #map { flex-grow: 1; width: 100%; }

        .container { 
            padding: 20px; 
            background: white; 
            border-radius: 20px 20px 0 0; 
            box-shadow: 0 -2px 15px rgba(0,0,0,0.2); 
            z-index: 1000;
        }

        h2 { margin: 0 0 15px 0; font-size: 1.3rem; }

        .input-group { margin-bottom: 15px; }

        input { 
            width: 100%; 
            padding: 12px; 
            margin: 5px 0; 
            border: 1px solid #ddd; 
            border-radius: 10px; 
            font-size: 1rem;
            box-sizing: border-box;
        }

        .price-tag { 
            text-align: center; 
            margin: 10px 0; 
            font-size: 1.1rem; 
            color: #333;
        }

        .btn-request { 
            width: 100%; 
            padding: 16px; 
            background: #ffcc00; 
            border: none; 
            border-radius: 12px; 
            font-weight: bold; 
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <div class="container">
        <h2>驴A d贸nde vas hoy?</h2>
        
        <div class="input-group">
            <input type="text" id="origen" placeholder=" Origen" value="Mi ubicaci贸n (Caucasia)">
            <input type="text" id="destino" placeholder=" Toca el mapa para fijar destino" readonly>
        </div>

        <div class="price-tag">
            Tarifa estimada: <strong id="tarifa">$ 5.000</strong>
        </div>

        <button class="btn-request" onclick="solicitar()">SOLICITAR MOTOTAXI</button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // 1. Inicializar mapa en Caucasia (basado en tu imagen)
        var map = L.map('map').setView([7.986, -75.193], 15);

        // 2. Cargar capa de dise帽o del mapa
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '漏 OpenStreetMap'
        }).addTo(map);

        // 3. Icono para el Mototaxista (Azul) y Destino (Rojo)
        var motoIcon = L.icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41], iconAnchor: [12, 41]
        });

        var destinoIcon = L.icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
            iconSize: [25, 41], iconAnchor: [12, 41]
        });

        // 4. Colocar la moto inicial
        L.marker([7.988, -75.192], {icon: motoIcon}).addTo(map).bindPopup("Mototaxista disponible");

        var marcadorDestino;

        // 5. L贸gica para "meter la direcci贸n" tocando el mapa
        map.on('click', function(e) {
            if (marcadorDestino) {
                map.removeLayer(marcadorDestino);
            }
            
            marcadorDestino = L.marker(e.latlng, {icon: destinoIcon}).addTo(map);
            
            // Actualizar el texto del input con coordenadas simples
            document.getElementById('destino').value = "Destino: " + e.latlng.lat.toFixed(4) + ", " + e.latlng.lng.toFixed(4);
            
            // Simulaci贸n de cambio de tarifa por distancia
            document.getElementById('tarifa').innerText = "$ 6.500";
        });

        function solicitar() {
            var destValue = document.getElementById('destino').value;
            if(destValue === "") {
                alert("Por favor, toca el mapa para indicar a d贸nde vas.");
            } else {
                alert("Conectando con la moto m谩s cercana a " + destValue);
            }
        }
    </script>
</body>
</html>
